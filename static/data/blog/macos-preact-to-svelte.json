{"cover_image":"../media/blog-social-intro.png","title":"macOS Web: From Preact to Svelte","date":"2021-08-23T18:30:00.000Z","description":"I recently moved macOS web from Preact to Svelte. Here's the firsthand account of my experience.","body":"<p>macOS is an amazing operating system. It looks really good, works really fast(Thanks to Apple's hardware), is very consistent, and overall an amazing experience.</p>\n<p>Personally, I have never been much infatuated with macOS. That changed last year, when macOS Big Sur came out with the super sleek and modern design with those beautiful blurs. I instantly fell in love with it <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ˜\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f60d.svg\">. Just look how beautiful it is <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ˜Œ\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f60c.svg\">.</p>\n<p>Unfortunately, I couldn't afford to buy the MacBook(You're overpriced, Apple <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ˜‘\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f611.svg\">), but I couldn't not want it. I spent weeks just watching review videos, screenshots of it. I am not a designer, but I have a good taste in design, and Big Sur was it! Finally when the craving became too much, I was like, <em>\"Screw it! I'll just make it myself\"</em></p>\n<p><img src=\"\" alt=\"Fine... I'll do it myself, quoted by Thanos\" style=\"display: none;\"></p><div class=\"picture-container\">\n  <div class=\"gif-vid-container\">\n    <video autoplay=\"\" loop=\"\" muted=\"\" playsinline=\"\">\n      <source src=\"../media/macos-preact-to-svelte--fine-i-will-do-it-myself/vidgif.mp4\" type=\"video/mp4\">\n      Your browser doesn't support HTML5 video playback. <a href=\"../media/macos-preact-to-svelte--fine-i-will-do-it-myself.gif\" target=\"_blank\" rel=\"noopener\">See the gif here</a>\n    </video>\n  </div>\n  </div><p></p>\n<p>So that's what I did <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ˜\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f601.svg\">. I recreated the interface of macOS Big Sur for Web. You can see it @ <a href=\"https://macos.vercel.app\" target=\"_blank\" rel=\"noopener\">macos.vercel.app</a>.</p>\n<h1 id=\"Early-days-(React)!\"><a class=\"heading-link\" href=\"#Early-days-(React)!\">#</a>Early days (React)!</h1>\n<p>I began working on this project back in November 2020, where I created just the topbar(without the opening menus), the animated dock, and the background. Nothing much, really. Quite easy to do. You can visit it here <a href=\"https://macos-web-mmo5af3r6.vercel.app/\" target=\"_blank\" rel=\"noopener\">macos-web-mmo5af3r6.vercel.app</a></p>\n<p>If you look closely, the dock animation isn't as smooth as it is in the latest iteration. Not to mention, this very simple app is using loads of dependencies. It loaded <mark>146KB</mark> min+brotli of JS, and 0KB of CSS(It was CSS-in-JS, so no separate JS file). For reference, the current version in Svelte loads only <mark>28.5KB</mark> of JS, and <mark>3.6KB</mark> of CSS, and it does a <strong>lot</strong> more than the November version.</p>\n<p>Here's the <code>package.json</code> dependencies of the November version <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ‘‡\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f447.svg\"></p>\n<pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #89DDFF\">{</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">@material-ui/core</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^4.11.0</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">@mdi/js</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^5.8.55</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">@rooks/use-raf</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^4.0.2</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">@tippyjs/react</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^4.2.0</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">date-fns</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^2.16.1</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">framer-motion</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^2.9.4</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">react</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^17.0.1</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">react-dom</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^17.0.1</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">react-helmet-async</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^1.0.7</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">restater</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">0.0.12</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">use-sound</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^2.0.1</span><span style=\"color: #89DDFF\">\"</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">}</span></span>\n<span class=\"line\"></span></code></pre>\n<p>See?! So much stuff for so little!</p>\n<p>So this was the state of the app. Then I didn't work on it. I was bored of it. . Then I had a road accident, broke my spine, was prescribed to bedrest for 3 months. I was bored out of my mind, so I thought, what the heck, I'll just continue working on it. So revived the project, made some heavy changes. Like I threw away <code>restater</code> library to use <a href=\"https://github.com/pmndrs/jotai\" target=\"_blank\" rel=\"noopener\">Jotai</a>, because it was much more simpler.</p>\n<p>Fast forward two months, I made some drastic changes. I replaced Snowpack(Bundler and dev server) with <a href=\"https://vitejs.dev/\" target=\"_blank\" rel=\"noopener\">ViteJS</a>. Why? No specific reason, I just felt it was more polished and had some superb features which I could use to make the app smaller in size.</p>\n<p>I replaced the existing JSS style with <code>styled-components</code>. Not perf related really, just that writing CSS as JS objects wasn't fun.</p>\n<p>I also got rid of some dependencies to reduce bundle size.</p>\n","id":"macos-preact-to-svelte","reading_time":1.965,"toc":[{"indent":0,"id":"Early-days-(React)!","title":"Early days (React)!","length":19}],"seriesIndex":0}