{"cover_image":"../media/blog-social-intro.png","title":"Why I moved from React to Svelte","date":"2021-08-23T18:30:00.000Z","description":"I recently moved macOS web from Preact to Svelte. Here's the firsthand account of my experience.","body":"<p>macOS is an amazing operating system. It looks really good, works really fast(Thanks to Apple's hardware), is very consistent, and overall an amazing experience.</p>\n<p>Personally, I have never been much infatuated with macOS. But that changed last year, when macOS Big Sur came out with the super sleek and modern design with those beautiful blurs. I instantly fell in love with it <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ˜\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f60d.svg\">. Just look how beautiful it is <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ˜Œ\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f60c.svg\">.</p>\n<p>Unfortunately, I couldn't afford to buy the MacBook(You're overpriced, Apple <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ˜‘\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f611.svg\">), but I couldn't not want it. I spent weeks just watching review videos and screenshots of it. I am not a designer, but I have a good taste in design, and Big Sur was it! Finally when the craving became too much, I was like, <em>\"Screw it! I'll just make it myself\"</em></p>\n<p><img src=\"\" alt=\"Fine... I'll do it myself, quoted by Thanos\" style=\"display: none;\"></p><div class=\"picture-container\">\n  <div class=\"gif-vid-container\">\n    <video autoplay=\"\" loop=\"\" muted=\"\" playsinline=\"\">\n      <source src=\"../media/macos-preact-to-svelte--fine-i-will-do-it-myself/vidgif.mp4\" type=\"video/mp4\">\n      Your browser doesn't support HTML5 video playback. <a href=\"../media/macos-preact-to-svelte--fine-i-will-do-it-myself.gif\" target=\"_blank\" rel=\"noopener\">See the gif here</a>\n    </video>\n  </div>\n  </div><p></p>\n<p>So that's what I did <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ˜\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f601.svg\">. I recreated the interface of macOS Big Sur for Web. You can see it @ <a href=\"https://macos.vercel.app\" target=\"_blank\" rel=\"noopener\">macos.vercel.app</a>.</p>\n<h1 id=\"Early-days-(React)!\"><a class=\"heading-link\" href=\"#Early-days-(React)!\">#</a>Early days (React)!</h1>\n<p>I began working on this project back in November 2020, with the stack being React with Snowpack as the bundler+dev server, JSS for styling, and restater for state management, and I created just the topbar(without the opening menus), the animated dock, and the background. Nothing much, really. Quite easy to do. You can visit it here <a href=\"https://macos-web-mmo5af3r6.vercel.app/\" target=\"_blank\" rel=\"noopener\">macos-web-mmo5af3r6.vercel.app</a></p>\n<p>If you look closely, the dock animation isn't as smooth as it is in the latest iteration. Not to mention, this very simple app is using loads of dependencies. It loaded <mark>146KB</mark> min+brotli of JS, and 0KB of CSS(It was CSS-in-JS, so no separate CSS file). For reference, the current version in Svelte loads only <mark>28.5KB</mark> of JS, and <mark>3.6KB</mark> of CSS, and it does a <strong>lot</strong> more than the November version.</p>\n<p>Here's the <code>package.json</code> dependencies of the November version <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ‘‡\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f447.svg\"></p>\n<pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #89DDFF\">{</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">@material-ui/core</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^4.11.0</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">@mdi/js</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^5.8.55</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">@rooks/use-raf</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^4.0.2</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">@tippyjs/react</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^4.2.0</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">date-fns</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^2.16.1</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">framer-motion</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^2.9.4</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">react</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^17.0.1</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">react-dom</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^17.0.1</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">react-helmet-async</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^1.0.7</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">restater</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">0.0.12</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">use-sound</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^2.0.1</span><span style=\"color: #89DDFF\">\"</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">}</span></span>\n<span class=\"line\"></span></code></pre>\n<p>See?! So much stuff for so little!</p>\n<p>So this was the state of the app. Then I didn't work on it. I was bored of it. Then I had an accident, broke my spine, was prescribed 3 months bedrest. I was so bored out of my mind, I thought, what the heck, I'll just continue working on it.</p>\n<p>So I revived the project, made some heavy changes. Like I threw away <code>restater</code> library to use <a href=\"https://github.com/pmndrs/jotai\" target=\"_blank\" rel=\"noopener\">Jotai</a>, because it was much more simpler.</p>\n<p>Fast forward two months, I made some drastic changes. I replaced Snowpack(Bundler and dev server) with <a href=\"https://vitejs.dev/\" target=\"_blank\" rel=\"noopener\">ViteJS</a>. Why? No specific reason, I just felt it was more polished and had some superb features which I could use to make the app smaller in size.</p>\n<p>I replaced the existing JSS style with <code>styled-components</code>. Not perf related really, just that writing CSS as JS objects wasn't fun.</p>\n<p>I also got rid of some dependencies to reduce bundle size.</p>\n<p>That brings us to <mark>120KB</mark> min+brotli JS. You can see it for yourself: <a href=\"https://macos-web-git-feat-switch-to-vite-puruvj.vercel.app/\" target=\"_blank\" rel=\"noopener\">macos-web-git-feat-switch-to-vite-puruvj.vercel.app</a></p>\n<p>I was still not satisfied with it. The app felt slow, the dock animation janky, menus wouldn't open up instantly. Not satisfactory!</p>\n<p>Then, I did something <strong>very</strong> drastic: I moved the app from <strong>React</strong> to <strong>Preact</strong>.</p>\n<h1 id=\"The-era-of-Preact\"><a class=\"heading-link\" href=\"#The-era-of-Preact\">#</a>The era of Preact</h1>\n<p>Yepp!! I did that. I'm crazy that way <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ˜\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f60f.svg\">.</p>\n<p>Anyways, moving React to Preact was a very smooth experience. I just had to install the official <code>@preactjs/preset-vite</code> Vite plugin by Preact team, and it took care of aliasing <code>react</code> in <code>import React from 'react'</code> to <code>preact/compat</code> and everything. It was very seamless. It just worked. Huge kudos to the Preact team!!</p>\n<p>And that, my friend, made all the difference in the world.</p>\n<p>The site got fast. Animations lost their jank. Menus opened instantly. <strong>Everything just worked!</strong>.</p>\n<p>Best part: Bundle size went down by a <strong>lottt!!</strong>. React + React DOM is 42KB. Preact Core + Compat is just 4KB, max!</p>\n<p>You can check it out here yourself <a href=\"https://macos-web-git-feat-move-to-preact-puruvj.vercel.app/\" target=\"_blank\" rel=\"noopener\">macos-web-git-feat-move-to-preact-puruvj.vercel.app</a>.</p>\n<blockquote>\n<p>You will find the bundle size is not drastically less here compared to the previous React iteration. That's because I added some dependencies in the period before transitioning.</p>\n</blockquote>\n<p>This was great, but there was one problem: Too many dependencies.</p>\n<p>Here's the <code>package.json</code> <code>dependencies</code> field <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ‘‡\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f447.svg\"></p>\n<pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #89DDFF\">{</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">@mdi/js</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^5.9.55</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">@rooks/use-raf</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^4.9.2</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">@tippyjs/react</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^4.2.3</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">color2k</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^1.2.4</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">date-fns</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^2.18.0</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">framer-motion</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^3.10.0</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">idb-keyval</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^5.0.4</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">immer</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^8.0.1</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">jotai</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^0.15.0</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">preact</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^10.5.12</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">prop-types</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^15.7.2</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">react-helmet-async</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^1.0.9</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">react-is</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^17.0.1</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">react-lazily</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^0.9.0</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">react-rnd</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^10.2.4</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">react-slider</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^1.1.4</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">react-sound</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^1.2.0</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">styled-components</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^5.2.1</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">styled-reset</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^4.3.4</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">throttle-debounce</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^3.0.1</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">tippy.js</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^6.3.1</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">use-interval</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^1.3.0</span><span style=\"color: #89DDFF\">\"</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">}</span></span>\n<span class=\"line\"></span></code></pre>\n<p>This is a lot of dependencies at this point. Doesn't look good, does it? <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ¤\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f910.svg\"></p>\n<h1 id=\"Goodbye-styled-components\"><a class=\"heading-link\" href=\"#Goodbye-styled-components\">#</a>Goodbye styled-components <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ³ï¸\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f3f3.svg\"></h1>\n<p>So in my quest to make the app smaller and faster, I found <code>styled-components</code> to be one of the roadblocks.</p>\n<p>What was the issue with it? Well, first thing, CSS-in-JS is always less performant than just raw CSS(Well written CSS. Bad, duplicated styled don't count <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ˜¼\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f63c.svg\">). 2nd, <code>styled-components</code> added 12KB bundle size to the app.</p>\n<p>And the most important one: The output CSS wouldn't minify.</p>\n<p>Generally, when you are writing in <code>.css</code> or <code>.scss</code> files, your CSS is minified completely, that is all spaces and line breaks are removed, making it smaller to send over the wire.</p>\n<p>But with styled-components, because I'm writing the CSS inside JavaScript strings, the CSS tooling can't minify it by default, so that CSS remains unminified.</p>\n<p><img src=\"\" alt=\"Unminified Styled components output\" style=\"display: none;\"></p><div class=\"picture-container\">\n  <figure style=\"width: 100%;--padding-top: 56.25%;\">\n    <picture>\n      <source type=\"image/png\" media=\"(min-width: 501px)\" data-srcset=\"../media/macos-preact-to-svelte--unmin-styled-comps-code/large.png\">\n      <source type=\"image/png\" media=\"(max-width: 500px)\" data-srcset=\"../media/macos-preact-to-svelte--unmin-styled-comps-code/small.png\">\n      <img alt=\"Unminified Styled components output\" data-src=\"../media/macos-preact-to-svelte--unmin-styled-comps-code/large.png\" class=\"lazyload blog-img\">\n    </picture>\n  </figure>\n  </div><p></p>\n<p>See? All the code is here as it is.</p>\n<p>And I couldn't use the <mark>babel-plugin-styled-components</mark>, as it wouldn't work with Vite, for some reason. And leaving Vite wasn't an option.</p>\n<p>So it was then that I decided to move to the basics, <strong>CSS Modules</strong> (SCSS Modules, to be exact <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ˜‰\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f609.svg\">)</p>\n<p>So I did that. Took a lot of effort, but the final result was worth it. It took the JS size from around 110KB to <mark>85KB</mark>, and the CSS was <mark>3.3KB</mark>. This was a huge amount of reduction, and made the app feel really fast. The load of supplying CSS was removed from the JS, and that alone made a lot of difference.</p>\n<p>Here's an in-detail write-up of moving to CSS Modules: <a href=\"https://www.puruvj.dev/blog/move-to-css-modules-from-styled-components\" target=\"_blank\" rel=\"noopener\">Why I moved from Styled Components to (S)CSS modules</a></p>\n<p>And, because this process required me to touch the whole project at once, I got the chance to revisit some not-so-good code and improve it, resulting in me getting rid of a lot of dependencies. This is the package.json's <code>dependencies</code> field after this change <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ‘‡\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f447.svg\"></p>\n<pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #89DDFF\">{</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">@mdi/js</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^5.9.55</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">@reach/slider</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^0.14.0</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">@rooks/use-raf</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^4.10.0</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">@tippyjs/react</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^4.2.5</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">clsx</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^1.1.1</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">date-fns</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^2.19.0</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">framer-motion</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^4.0.3</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">idb-keyval</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^5.0.4</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">immer</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^9.0.1</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">jotai</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^0.16.0</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">preact</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^10.5.13</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">react-rnd</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^10.2.4</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">tippy.js</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^6.3.1</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C792EA\">use-interval</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">^1.3.0</span><span style=\"color: #89DDFF\">\"</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">}</span></span>\n<span class=\"line\"></span></code></pre>\n<p>That's a lot of reduction compared to the previous iteration.</p>\n<p>So all this brings us to the final situation of macOS: Built in preact, styled with CSS Modules, only 85KB loaded at first, and pretty smooth usage.</p>\n<p>But me being me, I strived to make it even better. Because there wasn't much scope for radical techniques, I resorted to the ultimate technique: Code Splitting</p>\n<h1 id=\"Go-Code-splitting!\"><a class=\"heading-link\" href=\"#Go-Code-splitting!\">#</a>Go Code splitting!</h1>\n<p>Implementing Code splitting was very easy. The components that aren't needed on the first load, I split them away into their own separate chunks.</p>\n<p>One component where I do code splitting was the <code>AppNexus.tsx</code>. This is basically a gateway to render the right app component when you open any app. This is as easy as <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ‘‡\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f447.svg\"></p>\n<pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">import</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">{</span><span style=\"color: #F07178\"> </span><span style=\"color: #A6ACCD\">AppID</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">}</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF; font-style: italic\">from</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">__/stores/apps.store</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">import</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">{</span><span style=\"color: #F07178\"> </span><span style=\"color: #A6ACCD\">lazy</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">}</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF; font-style: italic\">from</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">react</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C792EA\">type</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">AppNexusProps</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">{</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #F07178\">appID</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">AppID</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #F07178\">isBeingDragged</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">boolean</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">};</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C792EA\">const</span><span style=\"color: #A6ACCD\"> Calculator </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #82AAFF\">lazy</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #C792EA\">=&gt;</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">import</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">./Calculator/Calculator</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #A6ACCD\">))</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">const</span><span style=\"color: #A6ACCD\"> VSCode </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #82AAFF\">lazy</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #C792EA\">=&gt;</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">import</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">./VSCode/VSCode</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #A6ACCD\">))</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">const</span><span style=\"color: #A6ACCD\"> Calendar </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #82AAFF\">lazy</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #C792EA\">=&gt;</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">import</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">./Calendar/Calendar</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #A6ACCD\">))</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C792EA\">const</span><span style=\"color: #A6ACCD\"> PlaceholderApp </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #82AAFF\">lazy</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #C792EA\">=&gt;</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">import</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">./Placeholder/Placeholder</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #A6ACCD\">))</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">export</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #C792EA\">const</span><span style=\"color: #A6ACCD\"> AppNexus </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">({</span><span style=\"color: #A6ACCD\"> appID</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #A6ACCD\"> isBeingDragged </span><span style=\"color: #89DDFF\">}:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">AppNexusProps</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #C792EA\">=&gt;</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">{</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">  </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #F07178\"> (</span><span style=\"color: #A6ACCD\">appID</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">===</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">calculator</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #F07178\">) </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #FFCB6B\">Calculator</span><span style=\"color: #89DDFF\"> /&gt;;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">  </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #F07178\"> (</span><span style=\"color: #A6ACCD\">appID</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">===</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">vscode</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #F07178\">) </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #FFCB6B\">VSCode</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">isBeingDragged</span><span style=\"color: #89DDFF\">={</span><span style=\"color: #A6ACCD\">isBeingDragged</span><span style=\"color: #89DDFF\">} /&gt;;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">  </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #F07178\"> (</span><span style=\"color: #A6ACCD\">appID</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">===</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">calendar</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #F07178\">) </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #FFCB6B\">Calendar</span><span style=\"color: #89DDFF\"> /&gt;;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #F07178\">  </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #FFCB6B\">PlaceholderApp</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">appID</span><span style=\"color: #89DDFF\">={</span><span style=\"color: #A6ACCD\">appID</span><span style=\"color: #89DDFF\">} /&gt;;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">};</span></span>\n<span class=\"line\"></span></code></pre>\n<p>See?? Super easy to do!!</p>\n<p>This brought the initial bundle size down to just <mark>62KB</mark> min+brotli with 3.9KB of CSS. 23KB smaller\nby just dynamically importing stuff <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ¤¯\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f92f.svg\"><img class=\"emoji\" draggable=\"false\" alt=\"ðŸ¤¯\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f92f.svg\"></p>\n<p>And this is when I took a break from this project(again!)...</p>\n<p>Until 12th August, 2021, when I was so bored I decided to just rebuild the whole thing again in Svelte. So that's what I did.</p>\n<h1 id=\"Svelte:-The-golden-age\"><a class=\"heading-link\" href=\"#Svelte:-The-golden-age\">#</a>Svelte: The golden age</h1>\n<p>I began migrating on morning of 12th August, kept at it whole day, and got the Dock, the menubar, and the action center working, as it was a matter of copy pasting only.</p>\n<p>As for the dock animation, I had <a href=\"https://puruvj.dev/blog/macos-dock-animation-svelte\" target=\"_blank\" rel=\"noopener\">already done an article about it</a>, so all I had to do was just copy paste stuff.</p>\n<p>I continued on 13th too, working whole day, implementing the different apps. Finally completed by the end of the day.</p>\n<h1 id=\"Results\"><a class=\"heading-link\" href=\"#Results\">#</a>Results</h1>\n<p>Unsurprisingly, the bundle size went down and runtime performance went up. If you have been following Web Dev news on Twitter and Reddit, you probably saw this coming from a mile away.</p>\n<p>But the extent of these improvements was <strong>very</strong> surprising. I'll just let the cat out of the bag: Initial bundle size went down to <mark>28.5KB</mark> of JS, min+brotli<img class=\"emoji\" draggable=\"false\" alt=\"ðŸ¤¯\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f92f.svg\"><img class=\"emoji\" draggable=\"false\" alt=\"ðŸ¤¯\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f92f.svg\"><img class=\"emoji\" draggable=\"false\" alt=\"ðŸ¤¯\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f92f.svg\"><img class=\"emoji\" draggable=\"false\" alt=\"ðŸ¤¯\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f92f.svg\"><img class=\"emoji\" draggable=\"false\" alt=\"ðŸ¤¯\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f92f.svg\">. That's less than half of what it was before.</p>\n<p>And runtime performance went up by a lot. With the previous version, the dock animation could get janky when my computer was overloaded. Not by a lot, but it was visible. After I moved to Svelte, even that much jank was gone. <strong>Fully gone!</strong></p>\n<h1 id=\"The-process\"><a class=\"heading-link\" href=\"#The-process\">#</a>The process</h1>\n<p>The process of migrating to Svelte from a React app was gruelling and hard and rough and mentally taxing. It was exhausting.</p>\n<p><strong>Ignore the line above, it was total BS <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ¤£\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f923.svg\"></strong></p>\n<p>Moving to Svelte was an <strong>extremely simple</strong> process. It was literally copying the JSX code, pasting it as is, removing the CSS Modules stuff and adding regular old classes.</p>\n<p>Because Svelte's state is very close to React's useState, moving it was a matter of copy-pasting all the state related code, and modifying it to be a regular Variable.</p>\n<p>So this <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ‘‡\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f447.svg\"></p>\n<pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #C792EA\">const</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">[</span><span style=\"color: #A6ACCD\">xPos</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #A6ACCD\"> setXPos</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #82AAFF\">useState</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #A6ACCD\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">const</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">[</span><span style=\"color: #A6ACCD\">yPos</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #A6ACCD\"> setYPos</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #82AAFF\">useState</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #A6ACCD\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">const</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">[</span><span style=\"color: #A6ACCD\">isMenuVisible</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #A6ACCD\"> setIsMenuVisible</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #82AAFF\">useState</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #FF9CAC\">false</span><span style=\"color: #A6ACCD\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span></code></pre>\n<p>became this in svelte <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ‘‡\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f447.svg\"></p>\n<pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #C792EA\">let</span><span style=\"color: #A6ACCD\"> xPos </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">let</span><span style=\"color: #A6ACCD\"> yPos </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">let</span><span style=\"color: #A6ACCD\"> isMenuVisible </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FF9CAC\">false</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span></code></pre>\n<p>This is it. Literally got rid of a lot of noise, but the skeleton structure remained the same.</p>\n<h2 id=\"But-what-about-Global-state\"><a class=\"heading-link\" href=\"#But-what-about-Global-state\">#</a>But what about Global state?</h2>\n<p>Yes, global state would've been a problem, but the thing is: <strong>It Wasn't</strong>.</p>\n<p>Moving React global state would be a huge pain if I were using the React Context or Redux, where person A tells person B to tell person C to change the state. I personally never liked this Reducer pattern. It made sense to use it on super big codebases, but I never encountered the problem myself.</p>\n<p>So I searched rigorously for a global management system as simple as possible. I already had a taste of the simplicity that <a href=\"https://stenciljs.com/docs/stencil-store\" target=\"_blank\" rel=\"noopener\">StencilJS store</a> and Svelte Stores provided.</p>\n<p>After searching long, I found this amazing library called <a href=\"https://jotai.pmnd.rs/\" target=\"_blank\" rel=\"noopener\">Jotai</a> which provided a global state very very similar to Svelte Stores, and I <strong>freaking loved it!!! <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ˜\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f60d.svg\"><img class=\"emoji\" draggable=\"false\" alt=\"ðŸ˜\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f60d.svg\"></strong></p>\n<p>It was exactly what I needed.</p>\n<p>Here's a little snippet of how it works <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ‘‡\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f447.svg\"></p>\n<pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// Create global store</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">const</span><span style=\"color: #A6ACCD\"> themeAtom </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #82AAFF\">atom</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">light</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #A6ACCD\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// Inside the component</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">const</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">[</span><span style=\"color: #A6ACCD\">theme</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #A6ACCD\"> setTheme</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #82AAFF\">useAtom</span><span style=\"color: #A6ACCD\">(themeAtom)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span></code></pre>\n<p>It makes the state management very linear, just like <code>useState</code>. Which made migrating it to Svelte extremely easy.</p>\n<p>I copied the <code>atom</code>s as is, renamed their function to <code>writable</code>, remove the whole <code>const [val, setVal] = useAtom(someAtom);</code> syntax entirely and put a <code>$</code> before the store where I was using it. And that's it! This is literally how I migrated away.</p>\n<h2 id=\"What-about-Styles\"><a class=\"heading-link\" href=\"#What-about-Styles\">#</a>What about Styles?</h2>\n<p>Same thing literally. Because Styles were just plain SCSS, independent of the framework, there was literally nothing to do here. Just copy paste styles from the .scss file to the Svelte SFCs, and we're done.</p>\n<p>This whole process was so simple, that it took me just 2 days to completely migrate away.</p>\n<p><img src=\"\" alt=\"Let's get this party started\" style=\"display: none;\"></p><div class=\"picture-container\">\n  <div class=\"gif-vid-container\">\n    <video autoplay=\"\" loop=\"\" muted=\"\" playsinline=\"\">\n      <source src=\"../media/macos-preact-to-svelte--party-celebration/vidgif.mp4\" type=\"video/mp4\">\n      Your browser doesn't support HTML5 video playback. <a href=\"../media/macos-preact-to-svelte--party-celebration.gif\" target=\"_blank\" rel=\"noopener\">See the gif here</a>\n    </video>\n  </div>\n  </div><p></p>\n<h1 id=\"Observations\"><a class=\"heading-link\" href=\"#Observations\">#</a>Observations</h1>\n<p>Here are my takeaways from this whole process <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ‘‡\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f447.svg\"></p>\n<h2 id=\"Svelte-Code-is-much-simpler\"><a class=\"heading-link\" href=\"#Svelte-Code-is-much-simpler\">#</a>Svelte Code is much simpler</h2>\n<p>This comes as no surprise, Svelte code is much shorter, more readable than JSX.</p>\n<p>I tweeted a little part of it <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ‘‡\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f447.svg\"></p>\n<p><img src=\"\" alt=\"Svelte is simpler tweet\" style=\"display: none;\"></p><div class=\"picture-container\">\n  <figure style=\"width: 100%;--padding-top: 80.08333333333333%;\">\n    <picture>\n      <source type=\"image/png\" media=\"(min-width: 501px)\" data-srcset=\"../media/macos-preact-to-svelte--svelte-simplicity-tweet/large.png\">\n      <source type=\"image/png\" media=\"(max-width: 500px)\" data-srcset=\"../media/macos-preact-to-svelte--svelte-simplicity-tweet/small.png\">\n      <img alt=\"Svelte is simpler tweet\" data-src=\"../media/macos-preact-to-svelte--svelte-simplicity-tweet/large.png\" class=\"lazyload blog-img\">\n    </picture>\n  </figure>\n  </div><p></p>\n<blockquote>\n<p><a href=\"https://twitter.com/puruvjdev/status/1425866919853260800\" target=\"_blank\" rel=\"noopener\">Source</a></p>\n</blockquote>\n<p>Every single component in the new Svelte Codebase is around 20-30% smaller. The number of files is literally <strong>half</strong> as before, cuz I don't need to separate <code>.scss</code> files anymore. Styles exists in the one <code>.svelte</code> file only.</p>\n<p>And some components that are now longer than before, they are longer cuz I got rid of some abstracted small components entirely, which I had refactored away earlier. Because Svelte is so simple in terms of readability, I could just inline these components and the code still looked very clean. <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ’¯\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f4af.svg\"> points for Svelte!!</p>\n<h2 id=\"Svelte-Motion\"><a class=\"heading-link\" href=\"#Svelte-Motion\">#</a>Svelte Motion = <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ”¥\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f525.svg\"></h2>\n<p>macOS is an Operating system, and no OS is complete without animations. This is where Svelte's built in Motion stores and transitions come in.</p>\n<p>Svelte's Motion stores are extremely lightweight, and extremely powerful. They power the dock animation when you hover over it, and using them is extremely easy.</p>\n<p>Previously I was using Framer Motion. Framer Motion is a great library and my go-to thing for animations in P/React. But there's just one little issue with it: It's not exactly small <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ¥²\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f972.svg\"></p>\n<p>This is the bundlephobia size of <code>framer-motion</code></p>\n<p><img src=\"\" alt=\"Framer Motion bundlephobia size. Gzip size = 32KB\" style=\"display: none;\"></p><div class=\"picture-container\">\n  <figure style=\"width: 100%;--padding-top: 55.25%;\">\n    <picture>\n      <source type=\"image/png\" media=\"(min-width: 501px)\" data-srcset=\"../media/macos-preact-to-svelte--bundlephobia-framer-motion/large.png\">\n      <source type=\"image/png\" media=\"(max-width: 500px)\" data-srcset=\"../media/macos-preact-to-svelte--bundlephobia-framer-motion/small.png\">\n      <img alt=\"Framer Motion bundlephobia size. Gzip size = 32KB\" data-src=\"../media/macos-preact-to-svelte--bundlephobia-framer-motion/large.png\" class=\"lazyload blog-img\">\n    </picture>\n  </figure>\n  </div><p></p>\n<p>This isn't very big, but this ain't small either. 32KB Gzip is a lot <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ¤\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f910.svg\"></p>\n<p>Framer Motion's size is indicative of its capabilities. Framer Motion can do a <strong>lot</strong>. Really, it can do anything animation related under the sun.</p>\n<p>But ofc, there's no such thing as a good tool and a bad tool. There's only the <strong>right tool for the JOB</strong>, and Framer Motion was overqualified for my use case.</p>\n<p>But Svelte fit right in. It had exactly what I needed(Except for one small piece, which I got from <code>popmotion</code>. Jut 3Kb big <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ˜Œ\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f60c.svg\">), and most importantly, it allowed me to programmatically handle it, which is easier than going the declarative route.</p>\n<p>Here's a little example. Go to <a href=\"https://macos.vercel.app\" target=\"_blank\" rel=\"noopener\">macos.vercel.app</a>, click on any icon on the dock. It jumps up an down once.</p>\n<p>Animating that with Framer Motion looked somewhat like this <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ‘‡\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f447.svg\"></p>\n<pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #C792EA\">const</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">[</span><span style=\"color: #A6ACCD\">animateObj</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #A6ACCD\"> setAnimateObj</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #82AAFF\">useState</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #89DDFF\">{</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F07178\">translateY</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> [</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">0%</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">0%</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">0%</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #A6ACCD\">] </span><span style=\"color: #89DDFF\">}</span><span style=\"color: #A6ACCD\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #FFCB6B\">motion.span</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">  </span><span style=\"color: #C792EA\">onTap</span><span style=\"color: #89DDFF\">={()</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #C792EA\">=&gt;</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #82AAFF\">setAnimateObj</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #89DDFF\">{</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F07178\">translateY</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> [</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">0%</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">-39.2%</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">0%</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #A6ACCD\">] </span><span style=\"color: #89DDFF\">}</span><span style=\"color: #A6ACCD\">)</span><span style=\"color: #89DDFF\">}</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">  </span><span style=\"color: #C792EA\">initial</span><span style=\"color: #89DDFF\">={</span><span style=\"color: #FF9CAC\">false</span><span style=\"color: #89DDFF\">}</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">  </span><span style=\"color: #C792EA\">animate</span><span style=\"color: #89DDFF\">={</span><span style=\"color: #A6ACCD\">animateObj</span><span style=\"color: #89DDFF\">}</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">  </span><span style=\"color: #C792EA\">transition</span><span style=\"color: #89DDFF\">={{</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F07178\">type</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">spring</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F07178\">duration</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">0.7</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">}}</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">  </span><span style=\"color: #C792EA\">transformTemplate</span><span style=\"color: #89DDFF\">={({</span><span style=\"color: #A6ACCD\"> translateY </span><span style=\"color: #89DDFF\">})</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #C792EA\">=&gt;</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">`</span><span style=\"color: #C3E88D\">translateY(</span><span style=\"color: #89DDFF\">${</span><span style=\"color: #A6ACCD\">translateY</span><span style=\"color: #89DDFF\">}</span><span style=\"color: #C3E88D\">)</span><span style=\"color: #89DDFF\">`</span><span style=\"color: #89DDFF\">}</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">{</span><span style=\"color: #676E95; font-style: italic\">/* Markup */</span><span style=\"color: #89DDFF\">}</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #FFCB6B\">motion.span</span><span style=\"color: #89DDFF\">&gt;;</span></span>\n<span class=\"line\"></span></code></pre>\n<p>This is pretty simple, but there are a few issues with it: Have to tell it to not run in the beginning, how to translate it. All these can be condensed into 1 big issue: It's declarative.</p>\n<p>I'm a JS guy first. Declarative programming doesn't come naturally to me. I see the world as cause and effect. You click, something happens.</p>\n<p>Doing the same thing in Svelte was much more easier and programmatic <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ‘‡\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f447.svg\"></p>\n<pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">script</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">  </span><span style=\"color: #676E95; font-style: italic\">// Spring animation for the click animation</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #C792EA\">const</span><span style=\"color: #A6ACCD\"> appOpenIconBounceTransform </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #82AAFF\">tweened</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">{</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #F07178\">duration</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">400</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #F07178\">easing</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> sineInOut</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">}</span><span style=\"color: #A6ACCD\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #C792EA\">async</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #C792EA\">function</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #82AAFF\">openApp</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #A6ACCD\">e</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">MouseEvent</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">{</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #676E95; font-style: italic\">/* State related stuff */</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #676E95; font-style: italic\">// Animate the icon</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #89DDFF; font-style: italic\">await</span><span style=\"color: #F07178\"> </span><span style=\"color: #A6ACCD\">appOpenIconBounceTransform</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">set</span><span style=\"color: #F07178\">(</span><span style=\"color: #89DDFF\">-</span><span style=\"color: #F78C6C\">39.2</span><span style=\"color: #F07178\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #676E95; font-style: italic\">// Now animate it back to its place</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #A6ACCD\">appOpenIconBounceTransform</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">set</span><span style=\"color: #F07178\">(</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #F07178\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">  </span><span style=\"color: #89DDFF\">}</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">script</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">span</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">style</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">transform: translate3d(0, {$appOpenIconBounceTransform}%, 0)</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #676E95; font-style: italic\">&lt;!-- Stuff --&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">span</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"></span></code></pre>\n<p>It's very clean and simple now. Plus it's not declarative anymore. I <strong>tell</strong> the program <strong>explicitly</strong> when to go up, and when to come back down. The program literally reads like this: <code>Go up -39.2%, and when you're done with that, go down to base position</code>. As simple as that Â¯\\_(ãƒ„)_/Â¯</p>\n<h2 id=\"Those-transitions\"><a class=\"heading-link\" href=\"#Those-transitions\">#</a>Those transitions <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ˜\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f60d.svg\"></h2>\n<p>Transitions in Svelte are basically animations to be run when some DOM is created or destroyed. This is nearly impossible to do in P/React without relying on external libraries like Framer Motion. But in Svelte, this is in-built, and extremelyyyyyyy easy to do.</p>\n<p>So, ofc, I put in transitions everywhere I could. Earlier, when you opened/closed any app, there was no transition. Now, when you close a window, it collapses into itself while closing, giving an awesome transition.</p>\n<p>Adding this window close transition was literally just this <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ‘‡\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f447.svg\"></p>\n<pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">script</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #C792EA\">function</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #82AAFF\">windowCloseTransition</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #A6ACCD\">el</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">{</span><span style=\"color: #A6ACCD\"> duration </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">300</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">})</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">{</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #C792EA\">const</span><span style=\"color: #F07178\"> </span><span style=\"color: #A6ACCD\">existingTransform</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #F07178\"> </span><span style=\"color: #82AAFF\">getComputedStyle</span><span style=\"color: #F07178\">(</span><span style=\"color: #A6ACCD\">el</span><span style=\"color: #F07178\">)</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #A6ACCD\">transform</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">{</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">      </span><span style=\"color: #A6ACCD\">duration</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">      easing</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F07178\"> </span><span style=\"color: #A6ACCD\">sineInOut</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">      </span><span style=\"color: #82AAFF\">css</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #A6ACCD\">t</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #F07178\"> </span><span style=\"color: #C792EA\">=&gt;</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">`</span><span style=\"color: #C3E88D\">opacity: </span><span style=\"color: #89DDFF\">${</span><span style=\"color: #A6ACCD\">t</span><span style=\"color: #89DDFF\">}</span><span style=\"color: #C3E88D\">; transform: </span><span style=\"color: #89DDFF\">${</span><span style=\"color: #A6ACCD\">existingTransform</span><span style=\"color: #89DDFF\">}</span><span style=\"color: #C3E88D\"> scale(</span><span style=\"color: #89DDFF\">${</span><span style=\"color: #A6ACCD\">t</span><span style=\"color: #89DDFF\">}</span><span style=\"color: #C3E88D\">)</span><span style=\"color: #89DDFF\">`</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #89DDFF\">};</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">  </span><span style=\"color: #89DDFF\">}</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">script</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">section</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">out:windowCloseTransition</span><span style=\"color: #89DDFF\">&gt;&lt;/</span><span style=\"color: #F07178\">section</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"></span></code></pre>\n<p>And that is it!! Now there's a really nice transition, with around 10 lines of code only.</p>\n<blockquote>\n<p>I see this as an absolute win ~~ Professor Hulk</p>\n</blockquote>\n<p>I added in transitions in many other places which I couldn't add before with Framer Motion. Not because they weren't possible, but because the syntax felt unnatural there, but here in Svelte, it just fits right in!</p>\n<p>Really, moving to Svelte made me realize how extremely powerful it is. A lot of React developers treat Svelte as a toy(I was one of them), but really, it isn't a toy. In fact I'd say it's more powerful than React. Yes, less control over everything than React, but for 95% of developers, it is a better choice than React anyway.</p>\n<h1 id=\"Final-Words\"><a class=\"heading-link\" href=\"#Final-Words\">#</a>Final Words</h1>\n<p>Hope you liked this half-historical half-technical article, and it gave you some enthusiasm to try Svelte, if you haven't already.</p>\n","id":"macos-react-to-svelte","reading_time":14.16,"toc":[{"indent":0,"id":"Early-days-(React)!","title":"Early days (React)!","length":19},{"indent":0,"id":"The-era-of-Preact","title":"The era of Preact","length":17},{"indent":0,"id":"Goodbye-styled-components","title":"Goodbye styled-components <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ³ï¸\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f3f3.svg\"/>","length":29},{"indent":0,"id":"Go-Code-splitting!","title":"Go Code splitting!","length":18},{"indent":0,"id":"Svelte:-The-golden-age","title":"Svelte: The golden age","length":22},{"indent":0,"id":"Results","title":"Results","length":7},{"indent":0,"id":"The-process","title":"The process","length":11},{"indent":1,"id":"But-what-about-Global-state","title":"But what about Global state?","length":28},{"indent":1,"id":"What-about-Styles","title":"What about Styles?","length":18},{"indent":0,"id":"Observations","title":"Observations","length":12},{"indent":1,"id":"Svelte-Code-is-much-simpler","title":"Svelte Code is much simpler","length":27},{"indent":1,"id":"Svelte-Motion","title":"Svelte Motion = <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ”¥\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f525.svg\"/>","length":18},{"indent":1,"id":"Those-transitions","title":"Those transitions <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ˜\" src=\"https://twemoji.maxcdn.com/v/13.1.0/svg/1f60d.svg\"/>","length":20},{"indent":0,"id":"Final-Words","title":"Final Words","length":11}],"seriesIndex":0}