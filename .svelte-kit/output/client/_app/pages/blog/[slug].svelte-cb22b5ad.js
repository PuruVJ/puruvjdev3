import{_ as t}from"../../chunks/preload-helper-9f12a5fd.js";import{a5 as e,a6 as a,C as n,S as s,i as o,s as r,e as c,j as i,k as l,t as d,c as u,a as f,m as h,n as m,g as p,d as v,b as g,Q as y,f as b,I as E,o as k,L as $,a7 as I,a8 as j,h as D,v as T,Y as w,Z as S,r as A,w as M,l as P,B as _,u as x,M as z,z as N,N as V,J as L,K as q,V as O,R,X as H,a9 as C,T as K}from"../../chunks/vendor-775c2945.js";import{f as X}from"../../chunks/format-date-58c32eef.js";import{a as B,f as J}from"../../chunks/fade-637bb303.js";import{t as Q}from"../../chunks/theme.store-f39e12c9.js";import{I as U}from"../../chunks/Icon-ae354ec3.js";const Y=e(0,{easing:a}),Z={getEmos:"/api/get-emos",setEmos:"/api/set-emos"},F=n({});function G(t){let e,a,n,s,o,r,P,_,x,z,N=t[2][t[0]].likes+"";return n=new U({props:{size:30,path:t[1]?I:j}}),{c(){e=c("div"),a=c("button"),i(n.$$.fragment),s=l(),o=c("span"),r=d(N),this.h()},l(t){e=u(t,"DIV",{id:!0,class:!0});var c=f(e);a=u(c,"BUTTON",{class:!0});var i=f(a);h(n.$$.fragment,i),s=m(i),o=u(i,"SPAN",{});var l=f(o);r=p(l,N),l.forEach(v),i.forEach(v),c.forEach(v),this.h()},h(){g(a,"class","svelte-ngvkkj"),y(a,"marked",t[1]),y(a,"dark","dark"===t[3]),g(e,"id","container"),g(e,"class","svelte-ngvkkj")},m(c,i){b(c,e,i),E(e,a),k(n,a,null),E(a,s),E(a,o),E(o,r),_=!0,x||(z=$(a,"click",t[4]),x=!0)},p(t,e){const s={};2&e&&(s.path=t[1]?I:j),n.$set(s),(!_||5&e)&&N!==(N=t[2][t[0]].likes+"")&&D(r,N),2&e&&y(a,"marked",t[1]),8&e&&y(a,"dark","dark"===t[3])},i(t){_||(T(n.$$.fragment,t),P||w((()=>{P=S(e,B,{}),P.start()})),_=!0)},o(t){A(n.$$.fragment,t),_=!1},d(t){t&&v(e),M(n),x=!1,z()}}}function W(t){let e,a,n=t[0]in t[2]&&G(t);return{c(){n&&n.c(),e=P()},l(t){n&&n.l(t),e=P()},m(t,s){n&&n.m(t,s),b(t,e,s),a=!0},p(t,[a]){t[0]in t[2]?n?(n.p(t,a),5&a&&T(n,1)):(n=G(t),n.c(),T(n,1),n.m(e.parentNode,e)):n&&(_(),A(n,1,1,(()=>{n=null})),x())},i(t){a||(T(n),a=!0)},o(t){A(n),a=!1},d(t){n&&n.d(t),t&&v(e)}}}function tt(t,e,a){let n,s;z(t,F,(t=>a(2,n=t))),z(t,Q,(t=>a(3,s=t)));var o=this&&this.__awaiter||function(t,e,a,n){return new(a||(a=Promise))((function(s,o){function r(t){try{i(n.next(t))}catch(e){o(e)}}function c(t){try{i(n.throw(t))}catch(e){o(e)}}function i(t){var e;t.done?s(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(r,c)}i((n=n.apply(t,e||[])).next())}))};let r,{blogID:c}=e;return N((()=>o(void 0,void 0,void 0,(function*(){yield function(){return o(this,void 0,void 0,(function*(){if(c in n)return;const t=yield fetch(`${Z.getEmos}?blogID=${c}`),e=yield t.json();V(F,n[c]=e,n)}))}(),a(1,r=!!localStorage.getItem(`like:${c}`))})))),t.$$set=t=>{"blogID"in t&&a(0,c=t.blogID)},[c,r,n,s,function(){return o(this,void 0,void 0,(function*(){const t=r?-1:1;V(F,n[c].likes+=t,n),a(1,r=!r);try{const e=yield fetch(Z.setEmos,{body:JSON.stringify(Object.assign(Object.assign({},n[c]),{blogID:c})),method:"POST",headers:{"Content-type":"application/json"}});"fail"===(yield e.text())&&(V(F,n[c].likes-=t,n),a(1,r=!r))}catch(e){V(F,n[c].likes-=t,n),a(1,r=!r)}1===t?localStorage.setItem(`like:${c}`,"true"):localStorage.removeItem(`like:${c}`)}))}]}class et extends s{constructor(t){super(),o(this,t,tt,W,r,{blogID:0})}}const{document:at}=K;function nt(t){let e,a,n,s,o,r,y,I,j,D,P,_,x,z,N,V,C,K,Q,U,Y,Z,F,G,W,tt,nt,st,ot,rt,ct,it,lt,dt=X(t[3])+"",ut=Math.ceil(t[7])+"";at.title=e=t[9]+" // Puru Vijay",P=new et({props:{blogID:t[6]}});let ft=t[8]&&function(t){let e,a,n,s;return{c(){e=c("mark"),a=d("SERIES"),n=l(),s=d(t[8]),this.h()},l(o){e=u(o,"MARK",{class:!0});var r=f(e);a=p(r,"SERIES"),r.forEach(v),n=m(o),s=p(o,t[8]),this.h()},h(){g(e,"class","svelte-qmzsd")},m(t,o){b(t,e,o),E(e,a),b(t,n,o),b(t,s,o)},p:L,d(t){t&&v(e),t&&v(n),t&&v(s)}}}(t);return{c(){a=c("meta"),n=c("meta"),s=c("meta"),o=c("meta"),r=c("meta"),y=c("link"),I=l(),j=l(),D=c("main"),i(P.$$.fragment),_=l(),x=c("div"),z=c("div"),N=l(),V=c("span"),ft&&ft.c(),C=l(),K=c("h1"),Q=l(),U=c("p"),Y=c("time"),Z=d(dt),F=d(" • "),G=c("span"),W=d(ut),tt=d(" min read"),nt=l(),st=c("article"),this.h()},l(t){const e=q('[data-svelte="svelte-166bybo"]',at.head);a=u(e,"META",{name:!0,content:!0}),n=u(e,"META",{property:!0,content:!0}),s=u(e,"META",{property:!0,content:!0}),o=u(e,"META",{property:!0,content:!0}),r=u(e,"META",{property:!0,content:!0}),y=u(e,"LINK",{rel:!0,href:!0}),e.forEach(v),I=m(t),j=m(t),D=u(t,"MAIN",{});var c=f(D);h(P.$$.fragment,c),_=m(c),x=u(c,"DIV",{class:!0,"aria-roledescription":!0});var i=f(x);z=u(i,"DIV",{class:!0,style:!0}),f(z).forEach(v),i.forEach(v),N=m(c),V=u(c,"SPAN",{class:!0});var l=f(V);ft&&ft.l(l),l.forEach(v),C=m(c),K=u(c,"H1",{}),f(K).forEach(v),Q=m(c),U=u(c,"P",{class:!0});var d=f(U);Y=u(d,"TIME",{});var g=f(Y);Z=p(g,dt),g.forEach(v),F=p(d," • "),G=u(d,"SPAN",{});var b=f(G);W=p(b,ut),tt=p(b," min read"),b.forEach(v),d.forEach(v),nt=m(c),st=u(c,"ARTICLE",{id:!0,class:!0}),f(st).forEach(v),c.forEach(v),this.h()},h(){g(a,"name","description"),g(a,"content",t[4]),g(n,"property","og:title"),g(n,"content",t[9]+" // Puru Vijay"),g(s,"property","og:description"),g(s,"content",t[4]),g(o,"property","og:image"),g(o,"content","https://puruvj.dev/"+t[5]),g(r,"property","og:url"),g(r,"content","https://puruvj.dev/blog/"+t[6]),g(y,"rel","canonical"),g(y,"href","https://puruvj.dev/blog/"+t[6]),g(z,"class","indicator svelte-qmzsd"),O(z,"transform","scaleX("+t[0]+")"),g(x,"class","progress svelte-qmzsd"),g(x,"aria-roledescription","progress"),g(V,"class","series svelte-qmzsd"),g(U,"class","svelte-qmzsd"),g(st,"id","blog-content"),g(st,"class","svelte-qmzsd")},m(e,c){E(at.head,a),E(at.head,n),E(at.head,s),E(at.head,o),E(at.head,r),E(at.head,y),b(e,I,c),b(e,j,c),b(e,D,c),k(P,D,null),E(D,_),E(D,x),E(x,z),E(D,N),E(D,V),ft&&ft.m(V,null),E(D,C),E(D,K),K.innerHTML=t[1],E(D,Q),E(D,U),E(U,Y),E(Y,Z),E(U,F),E(U,G),E(G,W),E(G,tt),E(D,nt),E(D,st),st.innerHTML=t[2],ct=!0,it||(lt=$(at.body,"scroll",R(10,!1,t[10])),it=!0)},p(t,[a]){(!ct||512&a)&&e!==(e=t[9]+" // Puru Vijay")&&(at.title=e),(!ct||1&a)&&O(z,"transform","scaleX("+t[0]+")"),t[8]&&ft.p(t,a)},i(t){ct||(T(P.$$.fragment,t),w((()=>{rt&&rt.end(1),ot||(ot=S(D,B,{})),ot.start()})),ct=!0)},o(t){A(P.$$.fragment,t),ot&&ot.invalidate(),rt=H(D,J,{}),ct=!1},d(t){v(a),v(n),v(s),v(o),v(r),v(y),t&&v(I),t&&v(j),t&&v(D),M(P),ft&&ft.d(),t&&rt&&rt.end(),it=!1,lt()}}}var st=function(t,e,a,n){return new(a||(a=Promise))((function(s,o){function r(t){try{i(n.next(t))}catch(e){o(e)}}function c(t){try{i(n.throw(t))}catch(e){o(e)}}function i(t){var e;t.done?s(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(r,c)}i((n=n.apply(t,e||[])).next())}))};const ot=({page:t,fetch:e})=>st(void 0,void 0,void 0,(function*(){const{slug:a}=t.params;try{const t=yield e(`../blog/${a}.json`);return{props:{blogData:yield t.json()}}}catch(n){return}}));function rt(e,a,n){let s;z(e,Y,(t=>n(0,s=t)));var o=this&&this.__awaiter||function(t,e,a,n){return new(a||(a=Promise))((function(s,o){function r(t){try{i(n.next(t))}catch(e){o(e)}}function c(t){try{i(n.throw(t))}catch(e){o(e)}}function i(t){var e;t.done?s(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(r,c)}i((n=n.apply(t,e||[])).next())}))};let{blogData:r}=a,{title:c,body:i,date:l,description:d,cover_image:u,id:f,reading_time:h,series:m}=r;const p=c.replace(/<img.*?alt="(.*?)"[^\>]+>/g,"$1");return N((()=>o(void 0,void 0,void 0,(function*(){document.body.classList.remove("background"),yield t((()=>import("../../chunks/lazysizes-f65eb485.js").then((function(t){return t.l}))),void 0)})))),C((()=>{V(Y,s=0,s)})),e.$$set=t=>{"blogData"in t&&n(11,r=t.blogData)},[s,c,i,l,d,u,f,h,m,p,function(){let t=document.body.scrollHeight-document.documentElement.clientHeight;const e=document.body.scrollTop;V(Y,s=e/t,s)},r]}export default class extends s{constructor(t){super(),o(this,t,rt,nt,r,{blogData:11})}}export{ot as load};
