{"title":"Amazing macOS Dock animation in Svelte","description":"Let's make the beautiful macOS Dock animation using Svelte","date":"2 April 2021","cover_image":"media/macos-dock-animation-svelte--cover.png","body":"<p><img src=\"\" alt=\"\" class=\"feature-image\" style=\"display: none;\"></p><div class=\"picture-container\">\n  <figure style=\"width: 100%;padding-top: 50%;background-color: rgb(122, 23, 42)\">\n    <picture>\n      <source type=\"image/webp\" media=\"(min-width: 501px)\" data-srcset=\"media/macos-dock-animation-svelte--cover/large.webp\">\n      <source type=\"image/webp\" media=\"(max-width: 500px)\" data-srcset=\"media/macos-dock-animation-svelte--cover/small.webp\">\n      <source type=\"image/png\" media=\"(min-width: 501px)\" data-srcset=\"media/macos-dock-animation-svelte--cover/large.png\">\n      <source type=\"image/png\" media=\"(max-width: 500px)\" data-srcset=\"media/macos-dock-animation-svelte--cover/small.png\">\n      <img alt=\"Placeholder\" data-src=\"media/macos-dock-animation-svelte--cover/large.png\" class=\"lazyload blog-img\">\n    </picture>\n  </figure>\n  </div><p></p>\n<p>macOS Dock, when you hover over it, has such a good feedback animation. The current icon your cursor is over becomes big, and the nearby icons become bigger too, but as you move your cursor, the icons' size changes based on distance from your cursor, kinda like this below <img class=\"emoji\" draggable=\"false\" alt=\"👇\" src=\"https://twemoji.maxcdn.com/v/13.0.2/svg/1f447.svg\"></p>\n<p><img src=\"\" alt=\"\" class=\"feature-image\" style=\"display: none;\"></p><div class=\"picture-container\">\n  <div class=\"gif-vid-container\">\n    <video autoplay=\"\" loop=\"\" muted=\"\" playsinline=\"\">\n      <source src=\"/media/macos-dock-animation-svelte--animation-preview/vidgif.mp4\" type=\"video/mp4\">\n      Your browser doesn't support HTML5 video playback. <a href=\"/media/macos-dock-animation-svelte--animation-preview.gif\" target=\"_blank\" rel=\"noopener\">See the gif here</a>\n    </video>\n  </div>\n  </div><p></p>\n<p>Pardon the bad quality <img class=\"emoji\" draggable=\"false\" alt=\"😁\" src=\"https://twemoji.maxcdn.com/v/13.0.2/svg/1f601.svg\">. Pretty slick, right? So interactive, so playful, its just freaking good <img class=\"emoji\" draggable=\"false\" alt=\"😍\" src=\"https://twemoji.maxcdn.com/v/13.0.2/svg/1f60d.svg\"></p>\n<p>But here's a twist. <strong>That isn't macOS</strong>. There are no tooltips, no desktop icons, even the animation looks bouncier.</p>\n<p>Ladies and Gentlemen, what you see above is the final product we're gonna make in this blog post using Svelte. <strong>In less than 100 lines of logic <img class=\"emoji\" draggable=\"false\" alt=\"😎\" src=\"https://twemoji.maxcdn.com/v/13.0.2/svg/1f60e.svg\"></strong></p>\n<h2 id=\"That-looks-way-too-good-for-just-100-lines\"><a class=\"heading-link\" href=\"blog/macos-dock-animation-svelte#That-looks-way-too-good-for-just-100-lines\">#</a>That looks way too good for just 100 lines <img class=\"emoji\" draggable=\"false\" alt=\"🧐\" src=\"https://twemoji.maxcdn.com/v/13.0.2/svg/1f9d0.svg\"><img class=\"emoji\" draggable=\"false\" alt=\"🧐\" src=\"https://twemoji.maxcdn.com/v/13.0.2/svg/1f9d0.svg\"></h2>\n<p>I know!! That's the beauty of Svelte <img class=\"emoji\" draggable=\"false\" alt=\"😌\" src=\"https://twemoji.maxcdn.com/v/13.0.2/svg/1f60c.svg\"></p>\n<p>Don't believe me? You can check it out right here: <a href=\"https://macos-web-svelte-dock-puruvj.vercel.app/\" target=\"_blank\" rel=\"noopener\">Demo</a>. <br>\nAnd here's the original source code @ Github: <a href=\"https://github.com/PuruVJ/macos-web-svelte-dock\" target=\"_blank\" rel=\"noopener\">Source</a></p>\n<p>Feel free to read the source code directly, if you feel like you can understand what is going on just from reading the source. And if you can't, no problem, that's what this article is for <img class=\"emoji\" draggable=\"false\" alt=\"😎\" src=\"https://twemoji.maxcdn.com/v/13.0.2/svg/1f60e.svg\"></p>\n<p>Let's dive into it!!</p>\n<h1 id=\"Tech-Stack\"><a class=\"heading-link\" href=\"blog/macos-dock-animation-svelte#Tech-Stack\">#</a>Tech Stack</h1>\n<p>Here's what the tech stack is gonna be for this little demo:</p>\n<ul>\n<li>Svelte</li>\n<li>popmotion library</li>\n<li>Typescript 4</li>\n<li>Vite</li>\n</ul>\n<h2 id=\"What's-with-Vite\"><a class=\"heading-link\" href=\"blog/macos-dock-animation-svelte#What's-with-Vite\">#</a>What's with Vite? <img class=\"emoji\" draggable=\"false\" alt=\"🤔\" src=\"https://twemoji.maxcdn.com/v/13.0.2/svg/1f914.svg\"></h2>\n<p>Vite is the new cool kid in the block <img class=\"emoji\" draggable=\"false\" alt=\"😎\" src=\"https://twemoji.maxcdn.com/v/13.0.2/svg/1f60e.svg\">. Its basically a bundler and dev server like Webpack(With the Dev Server plugin), only it comes with everything pre-built and pre-configured, so you can jump into the code directly.</p>\n<p>It won't change how we write the code, only the way we refer to our assets changes a bit, so you don't have to worry about it much.</p>\n<h2 id=\"Popmotion\"><a class=\"heading-link\" href=\"blog/macos-dock-animation-svelte#Popmotion\">#</a>Popmotion?</h2>\n<p>Yeah, this is an animation library on which the utterly awesome <mark>Framer Motion</mark> library is build. We don't really need the animation related stuff from this library, only a small helper function that is essential for this demo. Install it beforehand</p>\n<pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #A6ACCD\">npm i popmotion</span></span>\n<span class=\"line\"></span></code></pre>\n<p>Or if you're a <code>Yarn</code> person</p>\n<pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #A6ACCD\">yarn add popmotion</span></span>\n<span class=\"line\"></span></code></pre>\n<h1 id=\"Preliminary-setup\"><a class=\"heading-link\" href=\"blog/macos-dock-animation-svelte#Preliminary-setup\">#</a>Preliminary setup</h1>\n<p>Our demo won't look good without that slick background and the great CSS everywhere. So let's set up the basic shell of our application.</p>\n<p>So let's start with the root component.</p>\n<pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #676E95\">&lt;!-- App.svelte --&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">script</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">import</span><span style=\"color: #A6ACCD\"> Dock </span><span style=\"color: #89DDFF\">from</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">./lib/Dock.svelte</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">script</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">main</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">Dock</span><span style=\"color: #89DDFF\"> /&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">main</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">style</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #FFCB6B\">main</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">{</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #B2CCD6\">max-width</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">100vw</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #B2CCD6\">height</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">100vh</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #B2CCD6\">background</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #82AAFF\">url</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">/wallpaper.jpg</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #B2CCD6\">background-size</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> cover</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #B2CCD6\">background-position</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> center center</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">}</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">style</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"></span></code></pre>\n<p>Let's break it down</p>\n<ol>\n<li>\n<p>We're importing the <code>Dock</code> component. It's not declared yet, so there will be red squiggles in there. We'll declare it in a moment.</p>\n</li>\n<li>\n<p>We have a <code>main</code> tag enclosing the <code>Dock</code> element.</p>\n</li>\n<li>\n<p>We have our styles here. These are simply set so that the beautiful macOS Big Sur wallpaper takes up all the space and adjusts to different viewport sizes gracefully.</p>\n</li>\n</ol>\n<p>So we end with this beautiful view <img class=\"emoji\" draggable=\"false\" alt=\"👇\" src=\"https://twemoji.maxcdn.com/v/13.0.2/svg/1f447.svg\"></p>\n<p><img src=\"\" alt=\"\" class=\"feature-image\" style=\"display: none;\"></p><div class=\"picture-container\">\n  <figure style=\"width: 100%;padding-top: 56.25%;background-color: rgb(108, 33, 69)\">\n    <picture>\n      <source type=\"image/webp\" media=\"(min-width: 501px)\" data-srcset=\"media/macos-dock-animation-svelte--scaffold-wallpaper/large.webp\">\n      <source type=\"image/webp\" media=\"(max-width: 500px)\" data-srcset=\"media/macos-dock-animation-svelte--scaffold-wallpaper/small.webp\">\n      <source type=\"image/png\" media=\"(min-width: 501px)\" data-srcset=\"media/macos-dock-animation-svelte--scaffold-wallpaper/large.png\">\n      <source type=\"image/png\" media=\"(max-width: 500px)\" data-srcset=\"media/macos-dock-animation-svelte--scaffold-wallpaper/small.png\">\n      <img alt=\"Placeholder\" data-src=\"media/macos-dock-animation-svelte--scaffold-wallpaper/large.png\" class=\"lazyload blog-img\">\n    </picture>\n  </figure>\n  </div><p></p>\n<blockquote>\n<p>Notice we're referencing <code>wallpaper.jpg</code> as if its next to our current file, but it isn't. It's inside Vite's <code>public</code> folder. You can refer to those files as if you're current component in inside the <code>public</code> folder. This holds for <code>&lt;link&gt;</code>, <code>&lt;img&gt;</code>, <code>&lt;a&gt;</code> tags and what not. Go crazy <img class=\"emoji\" draggable=\"false\" alt=\"🤪\" src=\"https://twemoji.maxcdn.com/v/13.0.2/svg/1f92a.svg\">!</p>\n</blockquote>\n<h1 id=\"The-Dock\"><a class=\"heading-link\" href=\"blog/macos-dock-animation-svelte#The-Dock\">#</a>The Dock</h1>\n<p>So let's set up the actual <code>Dock.svelte</code> component.</p>\n<p>Here it is <img class=\"emoji\" draggable=\"false\" alt=\"👇\" src=\"https://twemoji.maxcdn.com/v/13.0.2/svg/1f447.svg\"></p>\n<pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">script</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">lang</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">ts</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">import</span><span style=\"color: #A6ACCD\"> DockItem </span><span style=\"color: #89DDFF\">from</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">./DockItem.svelte</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #C792EA\">const</span><span style=\"color: #A6ACCD\"> apps</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">string</span><span style=\"color: #A6ACCD\">[] </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> [</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">calendar</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">facetime</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">finder</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">launchpad</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">mail</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">maps</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">messages</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">photos</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">scared-cat</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">safari</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">system-preferences</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">view-source</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  ]</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #C792EA\">let</span><span style=\"color: #A6ACCD\"> mouseX</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">number</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">|</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">null</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">null;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">script</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">section</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">class</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">dock-container</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">div</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #C792EA\">class</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">dock-el</span><span style=\"color: #89DDFF\">\"</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #C792EA\">on:mousemove</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">{(event) =&gt; (mouseX = event.x)}</span><span style=\"color: #89DDFF\">\"</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #C792EA\">on:mouseleave</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">{() =&gt; (mouseX = null)}</span><span style=\"color: #89DDFF\">\"</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">  &gt;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    {#each apps as appID}</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">DockItem</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">{mouseX}</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">{appID}</span><span style=\"color: #89DDFF\"> /&gt;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    {/each}</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">div</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">section</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">style</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">.</span><span style=\"color: #FFCB6B\">dock-container</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">{</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #B2CCD6\">margin-bottom</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">0.3rem</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #B2CCD6\">left</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #B2CCD6\">bottom</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #B2CCD6\">z-index</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">9900</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #B2CCD6\">position</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> fixed</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #B2CCD6\">width</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">100%</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #B2CCD6\">height</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">5rem</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #B2CCD6\">padding</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">0.4rem</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #B2CCD6\">display</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> flex</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #B2CCD6\">justify-content</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> center</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">.</span><span style=\"color: #FFCB6B\">dock-el</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">{</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #B2CCD6\">backdrop-filter</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #82AAFF\">blur</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">5px</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #B2CCD6\">background-color</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #82AAFF\">hsla</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">240</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">3%</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">11%</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">0.4</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #B2CCD6\">box-shadow</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> inset </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">0.2px</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #82AAFF\">rgb</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">245</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">245</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">245</span><span style=\"color: #A6ACCD\"> / </span><span style=\"color: #F78C6C\">70%</span><span style=\"color: #89DDFF\">),</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #82AAFF\">hsla</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">0%</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">0%</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">0.3</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">2px</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">5px</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">19px</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">7px</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #B2CCD6\">padding</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">0.3rem</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #B2CCD6\">border-radius</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">1.2rem</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #B2CCD6\">height</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">100%</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #B2CCD6\">display</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> flex</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #B2CCD6\">align-items</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> flex-end</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">}</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">style</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"></span></code></pre>\n<p>Ooh, there's a lot going on here!! Let's break it down.</p>\n<pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #A6ACCD\"> DockItem </span><span style=\"color: #89DDFF\">from</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">./DockItem.svelte</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C792EA\">const</span><span style=\"color: #A6ACCD\"> apps</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">string</span><span style=\"color: #A6ACCD\">[] </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> [</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">calendar</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">facetime</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">finder</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">launchpad</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">mail</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">maps</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">messages</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">photos</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">scared-cat</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">safari</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">system-preferences</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">view-source</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">]</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C792EA\">let</span><span style=\"color: #A6ACCD\"> mouseX</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">number</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">|</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">null</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">null;</span></span>\n<span class=\"line\"></span></code></pre>\n<ol>\n<li>\n<p>We're importing the <code>DockItem</code> component. It is the heart of the whole demo, as all the animation is handled within it. I'll show you how to write it soon.</p>\n</li>\n<li>\n<p>Next up we have a list of all app IDs. Why are these needed? Because our app icons are stored by these names only, so we can easily <code>&lt;img src=</code> them.</p>\n</li>\n<li>\n<p>And here we have a <code>mouseX</code> variable, which we're gonna be tracking the current x-coordinate of our mouse (Distance of mouse from the left side of the screen). Notice we have defined its type as <code>number</code> or <code>null</code>. It will be <code>null</code> when the mouse isn't on the dock, so as to prevent any unintended resizing of elements. So we initialize it as <code>null</code>.</p>\n</li>\n</ol>\n<p>Now, analyzing the html part:</p>\n<pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">section</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">class</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">dock-container</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">div</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #C792EA\">class</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">dock-el</span><span style=\"color: #89DDFF\">\"</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #C792EA\">on:mousemove</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">{(event) =&gt; (mouseX = event.x)}</span><span style=\"color: #89DDFF\">\"</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #C792EA\">on:mouseleave</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">{() =&gt; (mouseX = null)}</span><span style=\"color: #89DDFF\">\"</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">  &gt;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    {#each apps as appID}</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">DockItem</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">{mouseX}</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">{appID}</span><span style=\"color: #89DDFF\"> /&gt;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    {/each}</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">div</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">section</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"></span></code></pre>\n<p>We have a <code>section.dock-container</code> as the container for the whole dock. This itself isn't the dock, it <strong>contains</strong> the dock. Its just an invisible container to center the dock.</p>\n<p>Next here we have the <code>div.dock-el</code>, which is the dock itself.</p>\n<p><img src=\"\" alt=\"\" class=\"feature-image\" style=\"display: none;\"></p><div class=\"picture-container\">\n  <figure style=\"width: 100%;padding-top: 10.299003322259136%;background-color: rgb(83, 16, 29)\">\n    <picture>\n      <source type=\"image/webp\" media=\"(min-width: 501px)\" data-srcset=\"media/macos-dock-animation-svelte--the-dock-itself/large.webp\">\n      <source type=\"image/webp\" media=\"(max-width: 500px)\" data-srcset=\"media/macos-dock-animation-svelte--the-dock-itself/small.webp\">\n      <source type=\"image/png\" media=\"(min-width: 501px)\" data-srcset=\"media/macos-dock-animation-svelte--the-dock-itself/large.png\">\n      <source type=\"image/png\" media=\"(max-width: 500px)\" data-srcset=\"media/macos-dock-animation-svelte--the-dock-itself/small.png\">\n      <img alt=\"Placeholder\" data-src=\"media/macos-dock-animation-svelte--the-dock-itself/large.png\" class=\"lazyload blog-img\">\n    </picture>\n  </figure>\n  </div><p></p>\n<p>Notice the event handlers we have put on this element.</p>\n<pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #A6ACCD\">on:mousemove=\"{(event) =&gt; (mouseX = event.x)}\"</span></span>\n<span class=\"line\"></span></code></pre>\n<p>This simply sets the value of the <code>mouseX</code> variable to the value of mouse's x-coordinate, or simply the distance from the left side of the screen.</p>\n<pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #A6ACCD\">on:mouseleave=\"{() =&gt; (mouseX = null)}\"</span></span>\n<span class=\"line\"></span></code></pre>\n<p>This simply sets the value of <code>mouseX</code> back to null, as a way of telling our components that dock isn;t being hovered over, so it can disable the animation.</p>\n<p>How does this tie into the whole thing? I'll explain soon.</p>\n<p>Next up we have this little section:</p>\n<pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #A6ACCD\">{#each apps as appID}</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">DockItem</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">{mouseX}</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">{appID}</span><span style=\"color: #89DDFF\"> /&gt;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">{/each}</span></span>\n<span class=\"line\"></span></code></pre>\n<p>We're looping through all the <code>apps</code>, which if you remember is the array of IDs of apps, by which name the app icons are stored in the <code>public</code> folder.</p>\n<p>Next up is the <code>DockItem</code> taking in <code>mouseX</code> and current <code>appID</code> as props. We'll see how these are used within the component.</p>\n<h1 id=\"The-juicy-stuff\"><a class=\"heading-link\" href=\"blog/macos-dock-animation-svelte#The-juicy-stuff\">#</a>The juicy stuff <img class=\"emoji\" draggable=\"false\" alt=\"😋\" src=\"https://twemoji.maxcdn.com/v/13.0.2/svg/1f60b.svg\"></h1>\n<p>Let's do the <code>DockItem</code> element now.</p>\n<p>I'll drop the whole code here. Its quite big. Try reading it before the explanation, then the explanation will make more sense.</p>\n<pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">script</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">lang</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">ts</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">import</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">{</span><span style=\"color: #F07178\"> </span><span style=\"color: #A6ACCD\">interpolate</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">}</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">from</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">popmotion</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">import</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">{</span><span style=\"color: #F07178\"> </span><span style=\"color: #A6ACCD\">spring</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">}</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">from</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">svelte/motion</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">import</span><span style=\"color: #A6ACCD\"> ButtonBase </span><span style=\"color: #89DDFF\">from</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">./ButtonBase.svelte</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #676E95\">/** Block 1 */</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">export</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #C792EA\">let</span><span style=\"color: #A6ACCD\"> appID</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">string</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">export</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #C792EA\">let</span><span style=\"color: #A6ACCD\"> mouseX</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">number</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">|</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">null</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #C792EA\">let</span><span style=\"color: #A6ACCD\"> el</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">HTMLImageElement</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #676E95\">/** Block 2 */</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #C792EA\">const</span><span style=\"color: #A6ACCD\"> baseWidth </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">57.6</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #C792EA\">const</span><span style=\"color: #A6ACCD\"> distanceLimit </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> baseWidth </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">6</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #C792EA\">const</span><span style=\"color: #A6ACCD\"> beyondTheDistanceLimit </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> distanceLimit </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #C792EA\">const</span><span style=\"color: #A6ACCD\"> distanceInput </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> [</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #A6ACCD\">distanceLimit</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #A6ACCD\">distanceLimit </span><span style=\"color: #89DDFF\">/</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">1.25</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #A6ACCD\">distanceLimit </span><span style=\"color: #89DDFF\">/</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    distanceLimit </span><span style=\"color: #89DDFF\">/</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    distanceLimit </span><span style=\"color: #89DDFF\">/</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">1.25</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    distanceLimit</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  ]</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #C792EA\">const</span><span style=\"color: #A6ACCD\"> widthOutput </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> [</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    baseWidth</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    baseWidth </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">1.1</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    baseWidth </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">1.618</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    baseWidth </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">2.618</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    baseWidth </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">1.618</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    baseWidth </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">1.1</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    baseWidth</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  ]</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #C792EA\">let</span><span style=\"color: #A6ACCD\"> distance </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> beyondTheDistanceLimit</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #C792EA\">const</span><span style=\"color: #A6ACCD\"> widthPX </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #82AAFF\">spring</span><span style=\"color: #A6ACCD\">(baseWidth</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">{</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #F07178\">damping</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">0.38</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #F07178\">stiffness</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">0.1</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">}</span><span style=\"color: #A6ACCD\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #FFCB6B\">$</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> $widthPX </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #82AAFF\">interpolate</span><span style=\"color: #A6ACCD\">(distanceInput</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #A6ACCD\"> widthOutput)(distance)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #C792EA\">let</span><span style=\"color: #A6ACCD\"> width</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">string</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #FFCB6B\">$</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> width </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">`${</span><span style=\"color: #A6ACCD\">$widthPX </span><span style=\"color: #89DDFF\">/</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">16</span><span style=\"color: #89DDFF\">}</span><span style=\"color: #C3E88D\">rem</span><span style=\"color: #89DDFF\">`</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #676E95\">/** Block 3 */</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #C792EA\">let</span><span style=\"color: #A6ACCD\"> raf</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">number</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #C792EA\">function</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #82AAFF\">animate</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #A6ACCD\">mouseX</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">number</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">|</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">null</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">{</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #89DDFF\">if</span><span style=\"color: #F07178\"> (</span><span style=\"color: #A6ACCD\">el</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&amp;&amp;</span><span style=\"color: #F07178\"> </span><span style=\"color: #A6ACCD\">mouseX</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">!==</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">null</span><span style=\"color: #F07178\">) </span><span style=\"color: #89DDFF\">{</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">      </span><span style=\"color: #C792EA\">const</span><span style=\"color: #F07178\"> </span><span style=\"color: #A6ACCD\">rect</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #F07178\"> </span><span style=\"color: #A6ACCD\">el</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getBoundingClientRect</span><span style=\"color: #F07178\">()</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">      </span><span style=\"color: #676E95\">// get the x coordinate of the img DOMElement's center</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">      </span><span style=\"color: #676E95\">// the left x coordinate plus the half of the width</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">      </span><span style=\"color: #C792EA\">const</span><span style=\"color: #F07178\"> </span><span style=\"color: #A6ACCD\">imgCenterX</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #F07178\"> </span><span style=\"color: #A6ACCD\">rect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #A6ACCD\">left</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #F07178\"> </span><span style=\"color: #A6ACCD\">rect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #A6ACCD\">width</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">/</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">      </span><span style=\"color: #676E95\">// difference between the x coordinate value of the mouse pointer</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">      </span><span style=\"color: #676E95\">// and the img center x coordinate value</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">      </span><span style=\"color: #C792EA\">const</span><span style=\"color: #F07178\"> </span><span style=\"color: #A6ACCD\">distanceDelta</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #F07178\"> </span><span style=\"color: #A6ACCD\">mouseX</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #F07178\"> </span><span style=\"color: #A6ACCD\">imgCenterX</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">      </span><span style=\"color: #A6ACCD\">distance</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #F07178\"> </span><span style=\"color: #A6ACCD\">distanceDelta</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">      </span><span style=\"color: #89DDFF\">return</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #89DDFF\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #A6ACCD\">distance</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #F07178\"> </span><span style=\"color: #A6ACCD\">beyondTheDistanceLimit</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">  </span><span style=\"color: #89DDFF\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #FFCB6B\">$</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> raf </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #82AAFF\">requestAnimationFrame</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #C792EA\">=&gt;</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #82AAFF\">animate</span><span style=\"color: #A6ACCD\">(mouseX))</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">script</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">section</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">ButtonBase</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">img</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">bind:this</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">{el}</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">src</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">/app-icons/{appID}/256.png</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">alt</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">\"\"</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">style</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">width: {width};</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\"> /&gt;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">ButtonBase</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">section</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"></span></code></pre>\n<p>So let's break down the JS part of it. Notice there are <code>blocks</code> in the JS code. As in <img class=\"emoji\" draggable=\"false\" alt=\"👇\" src=\"https://twemoji.maxcdn.com/v/13.0.2/svg/1f447.svg\"></p>\n<pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #676E95\">/** Block 1 */</span></span>\n<span class=\"line\"></span></code></pre>\n<p>There are blocks in the code. So let's break them down block by block.</p>\n<h2 id=\"Block-1\"><a class=\"heading-link\" href=\"blog/macos-dock-animation-svelte#Block-1\">#</a>Block 1</h2>\n<pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #676E95\">/** Block 1 */</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">export</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #C792EA\">let</span><span style=\"color: #A6ACCD\"> appID</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">string</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">export</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #C792EA\">let</span><span style=\"color: #A6ACCD\"> mouseX</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">number</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">|</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">null</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C792EA\">let</span><span style=\"color: #A6ACCD\"> el</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">HTMLImageElement</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span></code></pre>\n<p>Nothing much here. We're exporting the 2 props we passed to this element in the <code>Dock</code> component above</p>\n<pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">DockItem</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">{mouseX}</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">{appID}</span><span style=\"color: #89DDFF\"> /&gt;</span></span>\n<span class=\"line\"></span></code></pre>\n<p>Then we have an <code>el</code>. This is going to hold the reference to the main image element. This image element is the one whose width would be animated. We have to refer it so as to compute the correct width during the animation.</p>\n<h2 id=\"Block-2\"><a class=\"heading-link\" href=\"blog/macos-dock-animation-svelte#Block-2\">#</a>Block 2</h2>\n<pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #676E95\">/** Block 2 */</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C792EA\">const</span><span style=\"color: #A6ACCD\"> baseWidth </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">57.6</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">const</span><span style=\"color: #A6ACCD\"> distanceLimit </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> baseWidth </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">6</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">const</span><span style=\"color: #A6ACCD\"> beyondTheDistanceLimit </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> distanceLimit </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">const</span><span style=\"color: #A6ACCD\"> distanceInput </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> [</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #A6ACCD\">distanceLimit</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #A6ACCD\">distanceLimit </span><span style=\"color: #89DDFF\">/</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">1.25</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #A6ACCD\">distanceLimit </span><span style=\"color: #89DDFF\">/</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  distanceLimit </span><span style=\"color: #89DDFF\">/</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  distanceLimit </span><span style=\"color: #89DDFF\">/</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">1.25</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  distanceLimit</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">]</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">const</span><span style=\"color: #A6ACCD\"> widthOutput </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> [</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  baseWidth</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  baseWidth </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">1.1</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  baseWidth </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">1.618</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  baseWidth </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">2.618</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  baseWidth </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">1.618</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  baseWidth </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">1.1</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  baseWidth</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">]</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C792EA\">let</span><span style=\"color: #A6ACCD\"> distance </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> beyondTheDistanceLimit</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C792EA\">const</span><span style=\"color: #A6ACCD\"> widthPX </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #82AAFF\">spring</span><span style=\"color: #A6ACCD\">(baseWidth</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">{</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #F07178\">damping</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">0.38</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #F07178\">stiffness</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">0.1</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">}</span><span style=\"color: #A6ACCD\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">$</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> $widthPX </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #82AAFF\">interpolate</span><span style=\"color: #A6ACCD\">(distanceInput</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #A6ACCD\"> widthOutput)(distance)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C792EA\">let</span><span style=\"color: #A6ACCD\"> width</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">string</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">$</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> width </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">`${</span><span style=\"color: #A6ACCD\">$widthPX </span><span style=\"color: #89DDFF\">/</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">16</span><span style=\"color: #89DDFF\">}</span><span style=\"color: #C3E88D\">rem</span><span style=\"color: #89DDFF\">`</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span></code></pre>\n<p>Let's break it down.</p>\n<p>First off we have <code>baseWidth</code> variable. As the name suggests, it is gonna be the width of the images when they're not being hovered. But there's more. We're gonna build our whole animation calculations based on this variable.</p>\n<p><code>distanceLimit</code> and <code>beyondTheDistanceLimit</code> variables are used to setup how far from the cursor's position items should be scaled up</p>\n<p>Next up we got an array <code>distanceInput</code>. To explain it, let's take a look at the photo below <img class=\"emoji\" draggable=\"false\" alt=\"👇\" src=\"https://twemoji.maxcdn.com/v/13.0.2/svg/1f447.svg\"></p>\n<p><img src=\"\" alt=\"\" class=\"feature-image\" style=\"display: none;\"></p><div class=\"picture-container\">\n  <figure style=\"width: 100%;padding-top: 52.81396560708702%;background-color: rgb(107, 39, 80)\">\n    <picture>\n      <source type=\"image/webp\" media=\"(min-width: 501px)\" data-srcset=\"media/macos-dock-animation-svelte--marked-dock-positions/large.webp\">\n      <source type=\"image/webp\" media=\"(max-width: 500px)\" data-srcset=\"media/macos-dock-animation-svelte--marked-dock-positions/small.webp\">\n      <source type=\"image/jpg\" media=\"(min-width: 501px)\" data-srcset=\"media/macos-dock-animation-svelte--marked-dock-positions/large.jpg\">\n      <source type=\"image/jpg\" media=\"(max-width: 500px)\" data-srcset=\"media/macos-dock-animation-svelte--marked-dock-positions/small.jpg\">\n      <img alt=\"Placeholder\" data-src=\"media/macos-dock-animation-svelte--marked-dock-positions/large.jpg\" class=\"lazyload blog-img\">\n    </picture>\n  </figure>\n  </div><p></p>\n<p>As you can see, we are hovering over the messages app, so it's the biggest right now. The vertical green line is where the cursor would be lying at the moment. The arrows extend out to 3 icons, on each side of the currently hovered over icon. Notice, that the farther you go, the smaller the icons become.</p>\n<p>We can assert from this that the size of the icon is a function of its distance from the cursor. But what is the function?</p>\n<blockquote>\n<p>By function I refer to <code>mathematical functions</code>, as in <code>y = x + 1</code>, or <code>y = x^2 + x + 1</code>.</p>\n</blockquote>\n<p>Don't worry, we won't go into any math here. We'll let a helper function figure out the relationship between the distance and the size. I'll explain that in a moment.</p>\n<p>And next we have a <code>widthOutput</code> array. Notice the pattern in here. First element is small, 2nd is bigger. 3rd is even bigger. 4th is the biggest! 5th is as small as the 3rd. 6th as same as 2nd, and 7th is the smallest, same as the first.</p>\n<pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #A6ACCD\">1\n  2\n    3\n      4\n    5\n  6\n7\n</span></span></code></pre>\n<p>You can see this symmetricity in the <code>distanceInput</code> too. 7 items, following a similar pattern to <code>widthOutput</code>. So these arrays are related.Now all we need to do is find out how to relate them, so we can calculate the width for every icon based on its distance from mouse.</p>\n<p>This is where the helper function to generate that relationship comes in. We're gonna use the <code>popmotion</code> library finally. It has a function <code>interpolate</code> that does that for you.</p>\n<p>Before that, let's create our spring animation first.</p>\n<pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #C792EA\">let</span><span style=\"color: #A6ACCD\"> distance </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> beyondTheDistanceLimit</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C792EA\">const</span><span style=\"color: #A6ACCD\"> widthPX </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #82AAFF\">spring</span><span style=\"color: #A6ACCD\">(baseWidth</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">{</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #F07178\">damping</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">0.38</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #F07178\">stiffness</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">0.1</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">}</span><span style=\"color: #A6ACCD\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span></code></pre>\n<p><code>distance</code> here is the variable in which we're gonna track, you got it, the distance of current item's center point from cursor. For now we'll initialize with the value of <code>beyondTheDistanceLimit</code>, so we don't get any accidental animations when user just hovers over dock.</p>\n<p><code>widthPX</code> is the actual spring animation, imported from <code>svelte/motion</code>. For an initial value, we simply pass it the <code>baseWidth</code>, which we want the icon to have when we aren't hovering over it or when it is far away.</p>\n<p>We also have a config for this spring animation, in which I have put some sensible values to make the animation look natural. Feel free to play around with these.</p>\n<p>Now we have this little snippet:</p>\n<pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">$</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> $widthPX </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #82AAFF\">interpolate</span><span style=\"color: #A6ACCD\">(distanceInput</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #A6ACCD\"> widthOutput)(distance)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span></code></pre>\n<p>We're using Svelte's reactive statements to watch <code>distance</code>, and when it changes, our <code>interpolate</code> function will basically figure out the width for the current app icon, and set the value of <code>widthPX</code> to it. As <code>widthPX</code> is a spring timed store, it will simply keep changing bit by bit after we have set its value, just like a spring.</p>\n<p>Next up, we have some unit conversion:</p>\n<pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #C792EA\">let</span><span style=\"color: #A6ACCD\"> width</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">string</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">$</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> width </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">`${</span><span style=\"color: #A6ACCD\">$widthPX </span><span style=\"color: #89DDFF\">/</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">16</span><span style=\"color: #89DDFF\">}</span><span style=\"color: #C3E88D\">rem</span><span style=\"color: #89DDFF\">`</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span></code></pre>\n<p>widthPX is in pixels. Pixels will work too, but I'm a <code>rem</code> and <code>em</code> guy. I like all my units to be in <code>rems</code>. So I will declare a value to hold the value in <code>rem</code></p>\n<p>As <code>$widthPX</code> will be constantly changing, we need to put a reactive statement here to make sure <code>width</code> is always synchronized.</p>\n<h2 id=\"Block-3\"><a class=\"heading-link\" href=\"blog/macos-dock-animation-svelte#Block-3\">#</a>Block 3</h2>\n<pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #676E95\">/** Block 3 */</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C792EA\">let</span><span style=\"color: #A6ACCD\"> raf</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">number</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C792EA\">function</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #82AAFF\">animate</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #A6ACCD\">mouseX</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">number</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">|</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">null</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">{</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">  </span><span style=\"color: #89DDFF\">if</span><span style=\"color: #F07178\"> (</span><span style=\"color: #A6ACCD\">el</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&amp;&amp;</span><span style=\"color: #F07178\"> </span><span style=\"color: #A6ACCD\">mouseX</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">!==</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">null</span><span style=\"color: #F07178\">) </span><span style=\"color: #89DDFF\">{</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #C792EA\">const</span><span style=\"color: #F07178\"> </span><span style=\"color: #A6ACCD\">rect</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #F07178\"> </span><span style=\"color: #A6ACCD\">el</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getBoundingClientRect</span><span style=\"color: #F07178\">()</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #676E95\">// get the x coordinate of the img DOMElement's center</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #676E95\">// the left x coordinate plus the half of the width</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #C792EA\">const</span><span style=\"color: #F07178\"> </span><span style=\"color: #A6ACCD\">imgCenterX</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #F07178\"> </span><span style=\"color: #A6ACCD\">rect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #A6ACCD\">left</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #F07178\"> </span><span style=\"color: #A6ACCD\">rect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #A6ACCD\">width</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">/</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #676E95\">// difference between the x coordinate value of the mouse pointer</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #676E95\">// and the img center x coordinate value</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #C792EA\">const</span><span style=\"color: #F07178\"> </span><span style=\"color: #A6ACCD\">distanceDelta</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #F07178\"> </span><span style=\"color: #A6ACCD\">mouseX</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #F07178\"> </span><span style=\"color: #A6ACCD\">imgCenterX</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #A6ACCD\">distance</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #F07178\"> </span><span style=\"color: #A6ACCD\">distanceDelta</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #89DDFF\">return</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">  </span><span style=\"color: #89DDFF\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #F07178\">  </span><span style=\"color: #A6ACCD\">distance</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #F07178\"> </span><span style=\"color: #A6ACCD\">beyondTheDistanceLimit</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">$</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> raf </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #82AAFF\">requestAnimationFrame</span><span style=\"color: #A6ACCD\">(</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #C792EA\">=&gt;</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #82AAFF\">animate</span><span style=\"color: #A6ACCD\">(mouseX))</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span></code></pre>\n<p>Next up, we have the block 3 here.</p>\n<p>We first declare a variable <code>raf</code>. This will hold a <code>requestAnimationFrame</code> instance. It's not needed, but not having it resulted in some bugs for me, so better keep it.</p>\n<p>Next up, we have the <code>animate</code> function. We're passing in <code>mouseX</code>, the cursor's current position passed to it by the array element.</p>\n<p>Inside the function, we got a condition checking if <code>el</code>, the image element exists, and the <code>mouseX</code> isn't null. This is the explanation folks, why mouseX value is either <code>number</code> or <code>null</code>. When it's set to <code>null</code> by the <code>Dock</code> component, the animation is simply ignored thanks to the <code>if</code> statement here.</p>\n<p>Next up, in the <code>if</code> statement, we're simply doing some calculations to calculate distance of the center of the image from the cursor, adn finally setting the <code>distance</code> variable to the distance.</p>\n<p>If any of the conditions fail, we simply set <code>distance</code> to be <code>beyondTheDistanceLimit</code>, so it falls out of the <code>widthOutput</code> range, and isn't animated</p>\n<blockquote>\n<p>Remember how we have a reactive statement watching <code>distance</code>?\n<code>$: $widthPX = interpolate(distanceInput, widthOutput)(distance);</code>\nWhen the <code>distance</code> changes, <code>widthPX</code> will be updated. This in turn will update <code>width</code> to take on the value in <code>rem</code>s.</p>\n</blockquote>\n<p>Next up, we have a very important line here. A reactive statement requesting a <code>requestAnimationFrame</code> when running this function.</p>\n<blockquote>\n<p>Note: Not assigning the RequestAnimationFrame to a variable(<code>raf</code> in this case) results in some bugs.</p>\n</blockquote>\n<p>This is the end of the logic. Most of the work is over now. All we need to do now is set up the markup</p>\n<h2 id=\"Markup\"><a class=\"heading-link\" href=\"blog/macos-dock-animation-svelte#Markup\">#</a>Markup</h2>\n<pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">section</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">ButtonBase</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">img</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">bind:this</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">{el}</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">src</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">/app-icons/{appID}/256.png</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">alt</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">\"\"</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">style</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">width: {width};</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\"> /&gt;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">ButtonBase</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">section</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"></span></code></pre>\n<p>Just a <code>section</code> wrapping our image element for semantics, then we got a custom <code>ButtonBase</code> Svelte component. This is an unstyled button component that I created for general use. I'll drop the component code below. Not much to see here.</p>\n<p>next up we have the star of the show: The <code>img</code> element.</p>\n<ol>\n<li>\n<p>We're doing a <code>bind:this</code> to set element reference to <code>el</code> variable.</p>\n</li>\n<li>\n<p><code>src</code> is requesting the icon from the <code>public</code> folder. In Vite, if something is in <code>public</code> folder, you can refer to it as if it was in the same directory as the file you're writing code in. We're injecting the <code>appID</code> prop in the string.</p>\n</li>\n<li>\n<p>Lastly, <code>style=\"width: {width}\"</code> is the one doing all the magic here. Simply setting <code>width</code> property to the <code>width</code> variable will do all we need it to do.</p>\n</li>\n</ol>\n<p>Lastly, this is the <code>ButtonBase</code> code:</p>\n<pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">button</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">{...$$props}</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">slot</span><span style=\"color: #89DDFF\"> /&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">button</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">style</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">lang</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">scss</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  </span><span style=\"color: #FFCB6B\">button</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">{</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #B2CCD6\">color</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> inherit</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #B2CCD6\">text-decoration</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> none</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #B2CCD6\">vertical-align</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> middle</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #B2CCD6\">border</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #B2CCD6\">border-radius</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #B2CCD6\">outline</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #B2CCD6\">margin</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #B2CCD6\">padding</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #B2CCD6\">display</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> inline-flex</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #B2CCD6\">align-items</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> center</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #B2CCD6\">justify-content</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> center</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #B2CCD6\">position</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> relative</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #B2CCD6\">user-select</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> none</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #B2CCD6\">appearance</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> none</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #B2CCD6\">background-color</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> transparent</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #FFCB6B\">-webkit-tap-highlight-color</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> transparent</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    &amp;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\">not(:disabled) {</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">      </span><span style=\"color: #B2CCD6\">cursor</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> pointer</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    </span><span style=\"color: #89DDFF\">}</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">  }</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">style</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"></span></code></pre>\n<p>And the animation is done.</p>\n<p><a href=\"https://macos-web-svelte-dock-puruvj.vercel.app/\" target=\"_blank\" rel=\"noopener\">Demo</a>. <br>\n<a href=\"https://github.com/PuruVJ/macos-web-svelte-dock\" target=\"_blank\" rel=\"noopener\">Source</a></p>\n<p>Hope you got something good out of it</p>\n<p>Signing off <img class=\"emoji\" draggable=\"false\" alt=\"🖖\" src=\"https://twemoji.maxcdn.com/v/13.0.2/svg/1f596.svg\"></p>\n","id":"macos-dock-animation-svelte","reading_time":16.9175,"toc":[{"indent":1,"id":"","title":"That looks way too good for just 100 lines 🧐🧐","length":47},{"indent":0,"id":"","title":"Tech Stack","length":10},{"indent":1,"id":"","title":"What's with Vite? 🤔","length":20},{"indent":1,"id":"","title":"Popmotion?","length":10},{"indent":0,"id":"","title":"Preliminary setup","length":17},{"indent":0,"id":"","title":"The Dock","length":8},{"indent":0,"id":"","title":"The juicy stuff 😋","length":18},{"indent":1,"id":"","title":"Block 1","length":7},{"indent":1,"id":"","title":"Block 2","length":7},{"indent":1,"id":"","title":"Block 3","length":7},{"indent":1,"id":"","title":"Markup","length":6}]}